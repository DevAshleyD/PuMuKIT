{% extends 'PumukitWebTVBundle::layout.html.twig' %}

{% block javascripts %}
  {{ parent() }}
  <script src="{{ asset('bundles/pumukitwebtv/js/jwplayer/jwplayer.js') }}" type="text/javascript"></script>
{% endblock%}

{% block title %}{{ parent() }} - {{ live.name }}{% endblock %}

{% block body_without_bar %}
  <h1>{{ live.name()|default("No title"|trans) }}</h1>
  {% if isIE and versionIE < 9.0 %}
  <div style="width:100%; margin: 0px auto; color:red;">{% trans %}JWPlayer does not support your browser version{% endtrans %} {{ isIE }}. {% trans %}Please use 9.0 or higher version or use another browser.{% endtrans %}</div>
  {% else %}
  <div id="directo-sbs" style="width:100%; margin: 0px auto;"></div>
  {% endif %}

<script type="text/javascript">
document.addEventListener('DOMContentLoaded', function(){
  jwplayer("directo-sbs").setup({
      {% if live.broadcasting %}
      {% if mobile_device %}
      file: "{{ live.url|replace({'rtmp://':'http://', 'rtmpt://': 'http://'}) }}/{{ live.sourcename }}/playlist.m3u8",
      {% else %}
      file: "{{ live.url }}/{{ live.sourcename }}",
      {% endif %}
      {% else %}
      playlist: "{{ path('pumukit_live_playlist_id', { 'id': live.id }) }}", 
      {% endif %}
      {% if isIE and versionIE == 10 %}
      autostart: 'true',
      {% else %}
      autostart: true,
      {% endif %}
      width: "100%",
      stretching: "exactfit",
      aspectratio: "16:9",
      logo: {hide: true},
      analytics: {enabled: false},
      androidhls: true
  });
});

</script>

{% include('PumukitLiveBundle:Default:info.html.twig') %}

{% endblock %}
