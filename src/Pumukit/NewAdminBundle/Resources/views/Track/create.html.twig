<div class="modal-header">
  <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
  <h4 class="modal-title" id="myModalLabel">{% trans %}create new track{% endtrans %}</h4>
</div>
<div class="modal-body">
  {% form_theme form 'PumukitNewAdminBundle:Themes:fields.html.twig' %}
  <form method="post" target="iframeUpload"
        action="{{ path('pumukitnewadmin_track_upload', {'id': mm.id}) }}" 
        enctype="multipart/form-data" name="formulario">
    <iframe name="iframeUpload" style="display:none" src=""></iframe> 
    
    <input type="hidden" name="num_video" id="num_video" value="{{ mm.id }}" />
    <input type="hidden" name="num_serie" id="num_serie" value="{{ mm.getSeries().getId() }}" />
    <input type="hidden" name="proveedor" id="proveedor" value="{# TODO sfConfig::get('app_transcoder_proveedor') #}" />  <!-- ojo  -->
    <input type="hidden" name="titulo" id="titulo" value="{# TODO  $sf_data->getRaw('mm')->getTitle() {{ mm.getI18nTitle() }} #}" />
    <input type="hidden" name="tit_serie" id="tit_serie" value="{# TODO sf_data->getRaw('mm')->getSerialWithI18n()->getTitle()  {{ mm.getSeries().getI18nTitle() }} #}" />
    <input type="hidden" name="fecha_acto" id="fecha_acto" value="{{ mm.getRecorddate('ymd')|date('ymd') }}" />
    <input type="hidden" name="copiar" id="copiar" value="1" />
    
    <fieldset>
      
      {{ form_row(form["i18n_description"]) }}
      
      <div class="form-group" id="pumukitnewadmin_track_profile">
        <label for="profile" class="control-label">{% trans %}Profile{% endtrans %}</label>        
        {% for key in master_profiles|keys %}
        <div class="radio">
          <label><input type="radio" name="profile" id="profile_{{ key }}" value="{{ key }}" {{ ("master_copy"==key)?'checked':'' }}>{{ key }}</label>
        </div>
        {% endfor %}
      </div>

      <div class="form-group" id="pumukitnewadmin_track_priority">
        <label for="priority" class="control-label">{% trans %}Priority{% endtrans %}</label>        
        <div class="radio">
          <label><input type="radio" name="priority" value="1"/>{% trans %}Low-Priority{% endtrans %}&nbsp;&nbsp;&nbsp;&nbsp;</label>
        </div>
        <div class="radio">
          <label><input type="radio" name="priority" value="2" checked="checked"/>{% trans %}Normal-Priority{% endtrans %}&nbsp;&nbsp;&nbsp;&nbsp;</label>
        </div>
        <div class="radio">
          <label><input type="radio" name="priority" value="3"/>{% trans %}High-Priority{% endtrans %}&nbsp;&nbsp;&nbsp;&nbsp;</label>
        </div>
      </div>

      {{ form_row(form["language"]) }}

      <div class="form-group">
        <label for="file_type" class="control-label">{% trans %}Mode{% endtrans %}</label>        
        <div class="radio">
          <label><input type="radio" name="file_type" value="inbox" onclick="$('#pumukitnewadmin_track_file').hide();$('#pumukitnewadmin_track_inbox').show();"/> {% trans %}Inbox on server{% endtrans %}</label>
        </div>
        <div class="radio">
          <label><input type="radio" name="file_type" value="file" checked="checked" onclick="$('#pumukitnewadmin_track_inbox').hide();$('#pumukitnewadmin_track_file').show();"/> {% trans %}Local hard drive{% endtrans %}</label>
        </div>
      </div>
      
      <div class="form-group" id="pumukitnewadmin_track_file">
        <label for="url" class="control-label">{% trans %}Resource{% endtrans %}:</label>
        <div class="input-group">
          <input type="file" name="resource" id="resource" value="" size="70">
          <span style="color: blue">({% trans %}Under 2GB{% endtrans %})</span>
          <span id="file_upload_progress" style="color:blue; display:none;">{% trans %}Progress{% endtrans %}...</span>
        </div>
      </div>
      
      <div class="form-group" id="pumukitnewadmin_track_inbox" style="display: none">
        <label for="file" class="control-label">{% trans %}Resource{% endtrans %}:</label>
        <div class="input-group">
          <input type="text" name="file" id="file" value="//172.20..." class="form-control">
          <input onclick="$('#explorer_videoserv').toggle(); return false;" type="button" value="{% trans %}explore{% endtrans %}"/>
          <div id="explorer_videoserv" class="videoserv" style="display:none;">            
            <ul class="videoserv_tree">
              {% for dir in dirs %}
              <li class="collapsed">
                {# TODO define fileServerTree #}
                <span onclick="fileServerTree(this, 'file', '{{ dir }}', 0, 'explorer_videoserv')">{{ dir }}</span>
                <ul></ul>
              </li>
              {% endfor %}
            </ul>
          </div>
        </div>
      </div>      
    </fieldset>
    <div class="modal-footer">
      <button type="button" class="btn btn-default btn-raised" data-dismiss="modal">{% trans %}Cancel{% endtrans %}</button>
      <button type="submit" class="btn btn-pumukit btn-raised" onclick="$('#file_upload_progress').show();">{% trans %}OK{% endtrans %}</button>
    </div>
  </form>
</div>
