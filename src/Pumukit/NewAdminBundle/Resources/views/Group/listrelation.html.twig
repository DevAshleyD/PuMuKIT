{% if app.user and is_granted(constant('Pumukit\\SchemaBundle\\Security\\Permission::ACCESS_GROUPS')) %}
<table>
  <tdody>
    <input type="hidden" id="mm_id" value="{{ mm.id }}"/>
    <div class="panel panel-default">
      <div class="panel-heading">{% trans %}Groups{% endtrans %}</div>
      <div class="panel-body" id="group_mm">
        <div class="row" style="margin-right: 0px; margin-left: 0px;">
          <div style="width:430px; float: left;">
            {% trans %}Groups{% endtrans %}:
          </div>
          <div style="width:390px; float: left;">
            {% trans %}Selected Groups{% endtrans %}:
          </div>
        </div>
        <div style="overflow:hidden;height: 240px">
	      <div style="width:390px; float: left; height: 220px; border: 1px solid #bbb; overflow-x: hidden; overflow-y: scroll" class="tag list-group pmk-tag-tree" id="delete_mm_groups">
            {% include 'PumukitNewAdminBundle:Group:listgroupsajax.html.twig' with {'mm': mm, 'groups': groups} %}
	      </div>
	      <div style="float: left; padding: 110px 5px 0px">
	        <a href="#" onclick="$('#add_mm_groups > a.active').trigger('dblclick'); return false;">&#8592;</a>
	        <a href="#" onclick="$('#delete_mm_groups > a.active').trigger('dblclick'); return false;">&#8594;</a>
	      </div>
          {# Groups added to the multimedia object #}
	      <div style="width:390px; height:220px; border: 1px solid #bbb; float: left; overflow-x: hidden; overflow-y: scroll" class="tag" id="added_mm_groups">
	        <div class="tag_tree list-group" id="add_mm_groups" >
	          {% for mm_group in mm.getGroups() %}
              <a href="#" class="list-group-item add-mm-group-item"
                 id="add_mm_group_{{ mm_group.id }}"
                 onclick="javascript:return select_group(this);"
                 ondblclick="javascript:delete_mm_group('{{ mm_group.id }}', '{{ mm.id }}', '{{ mm_group.key }}', '{{ mm_group.name }}');">
                <i class="mdi-social-group"></i>
                {{ mm_group.key }} - {{ mm_group.name }}
              </a>
	          {% endfor %}
	        </div>
          </div>
	    </div>
      </div>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-default btn-raised" data-dismiss="modal">{% trans %}Cancel{% endtrans %}</button>
      <button type="button" class="btn btn-primary btn-raised" id="pumukitnewadmin_mm_groups_reset">{% trans %}Reset{% endtrans %}</button>
      <button type="submit" class="btn btn-pumukit btn-raised" id="pumukitnewadmin_mm_groups_submit">{% trans %}Save changes{% endtrans %}</button>
    </div>
    
    
    {#
    {% for group in groups %}
    <tr>
      <td><ul><li></li></ul></td>
      <td>
        <a href="#" onclick="window.submit_delete_group_relation('{{ group.id }}', '{{ mm.id }}', '{{ group.getName() }}', '{{ template }}'); return false;">
          <i class="mdi-content-clear"></i>
        </a>
      </td>
      <td>&nbsp;{{ group.key }} - {{ group.name }}</td>
    </tr>
    {% endfor %}
    <tr>
      <td><ul><li></li></ul></td>
      <td colspan="6">
        <a title="{% trans %}Add{% endtrans %}"
           href="{{ path('pumukitnewadmin_group_list_autocomplete', {'roleId': role.id, 'mmId': mm.id}) }}"
           data-toggle="modal" data-backdrop="static" data-target="#myAuxModal{{ template }}">
          {% trans %}add{% endtrans %}...
        </a>
      </td>
    </tr>
    #}

</tbody>
</table>
{% else %}
{% trans %}You don't have enough permissions to access this content.{% endtrans %}
{% endif %}
